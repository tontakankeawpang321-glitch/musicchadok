<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏£‡∏∞‡∏ô‡∏≤‡∏î‡πÄ‡∏≠‡∏Å‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏à‡∏≥‡∏•‡∏≠‡∏á (Ranat Ek Lek Virtual)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');

        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #1a1510;
            background-image: radial-gradient(circle, #2c241b 0%, #0f0c09 100%);
            overflow: hidden; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô */
            touch-action: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô default touch actions */
            user-select: none;
            -webkit-user-select: none;
        }

        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÑ‡∏°‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏£‡∏∞‡∏ô‡∏≤‡∏î */
        .wood-texture {
            background: #5c4033;
            background: linear-gradient(to bottom, #75513f, #3e2b22);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 0 10px 20px rgba(0,0,0,0.5);
            border-radius: 10px;
            border: 4px solid #2a1d15;
        }

        /* ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏•‡∏π‡∏Å‡∏£‡∏∞‡∏ô‡∏≤‡∏î‡πÄ‡∏´‡∏•‡πá‡∏Å */
        .key {
            position: relative;
            background: linear-gradient(135deg, #bf953f, #fcf6ba 40%, #b38728 60%, #aa771c 100%); /* ‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡πÇ‡∏•‡∏´‡∏∞ */
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.6), inset 0 1px 1px rgba(255,255,255,0.5);
            transition: transform 0.05s, filter 0.05s;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border: 1px solid #7a5c2f;
            /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏∞‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡∏¥‡∏î‡∏™‡∏µ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏Ç‡∏≠‡∏á browser ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            -webkit-tap-highlight-color: transparent;
        }
        
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡∏Å‡∏î - ‡πÉ‡∏ä‡πâ class active ‡πÅ‡∏ó‡∏ô :active ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏î‡πâ‡∏ß‡∏¢ JS ‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏ï‡∏≠‡∏ô‡∏•‡∏≤‡∏Å */
        .key.active {
            transform: scale(0.95) translateY(2px);
            filter: brightness(1.2);
            background: linear-gradient(135deg, #e6b755, #fffdcf 40%, #d4a339 60%, #c9912b 100%);
            box-shadow: 0 1px 2px rgba(0,0,0,0.8);
        }

        /* ‡πÄ‡∏ä‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≠‡∏¢‡∏£‡∏∞‡∏ô‡∏≤‡∏î */
        .string-line {
            position: absolute;
            background: rgba(255,255,255,0.3);
            height: 2px;
            width: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* Overlay ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô */
        #start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            flex-direction: column;
            color: white;
        }

        /* ‡πÑ‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á */
        .recording-dot {
            width: 12px;
            height: 12px;
            background-color: red;
            border-radius: 50%;
            display: inline-block;
            animation: pulse 1s infinite;
            margin-right: 5px;
        }

        @keyframes pulse {
            0% { opacity: 1; box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
            70% { opacity: 0.5; box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
            100% { opacity: 1; box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
        }

        /* Scrollbar ‡∏ã‡πà‡∏≠‡∏ô */
        ::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-between p-2">

    <!-- Overlay ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏° -->
    <div id="start-overlay">
        <div class="text-center p-6 border border-yellow-600 rounded-lg bg-gray-900 shadow-2xl">
            <h1 class="text-3xl font-bold text-yellow-500 mb-4">‡∏£‡∏∞‡∏ô‡∏≤‡∏î‡πÄ‡∏≠‡∏Å‡πÄ‡∏´‡∏•‡πá‡∏Å</h1>
            <p class="text-gray-300 mb-6">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô / Tap to Start</p>
            <div class="text-4xl animate-bounce">üëÜ</div>
        </div>
    </div>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->
    <div class="flex justify-between items-center bg-gray-900 bg-opacity-80 p-2 rounded-lg border border-gray-700 h-[10vh] min-h-[60px] z-10 select-none">
        <div class="flex items-center space-x-2">
            <h1 class="text-yellow-500 font-bold text-lg hidden sm:block md:block pl-2">‡∏£‡∏∞‡∏ô‡∏≤‡∏î‡πÄ‡∏≠‡∏Å‡πÄ‡∏´‡∏•‡πá‡∏Å</h1>
            <button id="toggle-notes" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm border border-gray-500">
                ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏ô‡πâ‡∏ï
            </button>
        </div>

        <div class="flex items-center space-x-2">
            <span id="timer" class="text-red-400 font-mono hidden">00:00</span>
            
            <button id="record-btn" class="bg-red-900 hover:bg-red-700 text-white px-3 py-1 rounded text-sm flex items-center border border-red-600">
                <div class="w-3 h-3 bg-red-500 rounded-full mr-1"></div> ‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á
            </button>
            
            <button id="stop-btn" class="hidden bg-gray-600 text-white px-3 py-1 rounded text-sm border border-gray-400">
                ‡∏´‡∏¢‡∏∏‡∏î
            </button>

            <button id="play-btn" class="hidden bg-green-700 hover:bg-green-600 text-white px-3 py-1 rounded text-sm border border-green-500">
                ‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô
            </button>
            
            <a id="download-link" class="hidden bg-blue-700 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm border border-blue-500">
                ‚¨á ‡πÇ‡∏´‡∏•‡∏î
            </a>
        </div>
    </div>

    <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ô‡∏≤‡∏î (Container) -->
    <div class="relative flex-grow flex items-center justify-center p-1 sm:p-4 h-[88vh]">
        <!-- ‡∏£‡∏≤‡∏á‡∏£‡∏∞‡∏ô‡∏≤‡∏î -->
        <div class="wood-texture w-full h-full relative flex flex-col justify-center items-center shadow-2xl p-2 sm:p-4">
            
            <!-- ‡∏™‡∏≤‡∏¢‡∏£‡πâ‡∏≠‡∏¢ (‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á) -->
            <div class="string-line top-[20%]"></div>
            <div class="string-line bottom-[20%]"></div>

            <!-- ‡πÅ‡∏õ‡πâ‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏£‡∏∞‡∏ô‡∏≤‡∏î (Grid Container) -->
            <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° ID ‡πÉ‡∏´‡πâ container ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö Event ‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏Å -->
            <div id="keys-container" class="relative w-full h-full grid grid-cols-[repeat(21,1fr)] gap-1 sm:gap-2 z-10 touch-none">
                <!-- Keys will be generated by JS -->
            </div>
            
            <!-- ‡∏ê‡∏≤‡∏ô (‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á) -->
            <div class="absolute bottom-0 w-full h-4 bg-black opacity-30 rounded-b-lg"></div>
        </div>
    </div>

    <script>
        // --- 1. Audio Engine (Synthesis) ---
        let audioCtx;
        let masterGain;
        let dest; 
        let isSetup = false;

        const baseFrequencies = [
            196.00, // G3
            220.00, // A3
            246.94, // B3
            261.63, // C4
            293.66, // D4
            329.63, // E4
            349.23, // F4
            392.00, // G4
            440.00, // A4
            493.88, // B4
            523.25, // C5
            587.33, // D5
            659.25, // E5
            698.46, // F5
            783.99, // G5
            880.00, // A5
            987.77, // B5
            1046.50, // C6
            1174.66, // D6
            1318.51, // E6
            1396.91  // F6
        ];

        const noteLabels = ["‡∏ã", "‡∏•", "‡∏ó", "‡∏î", "‡∏£", "‡∏°", "‡∏ü", "‡∏ã", "‡∏•", "‡∏ó", "‡∏î", "‡∏£", "‡∏°", "‡∏ü", "‡∏ã", "‡∏•", "‡∏ó", "‡∏î", "‡∏£", "‡∏°", "‡∏ü"];

        function initAudio() {
            if (isSetup) return;
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            audioCtx = new AudioContext();
            
            masterGain = audioCtx.createGain();
            masterGain.gain.value = 0.8;
            masterGain.connect(audioCtx.destination);
            
            dest = audioCtx.createMediaStreamDestination();
            masterGain.connect(dest);

            isSetup = true;
        }

        function playSound(freq) {
            if (!audioCtx) initAudio();
            if (audioCtx.state === 'suspended') audioCtx.resume();

            const t = audioCtx.currentTime;
            
            const osc1 = audioCtx.createOscillator();
            osc1.type = 'sine';
            osc1.frequency.setValueAtTime(freq, t);

            const osc2 = audioCtx.createOscillator();
            osc2.type = 'sine';
            osc2.frequency.setValueAtTime(freq * 2.8, t); 

            const noiseBuffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 0.01, audioCtx.sampleRate);
            const output = noiseBuffer.getChannelData(0);
            for (let i = 0; i < noiseBuffer.length; i++) {
                output[i] = Math.random() * 2 - 1;
            }
            const noise = audioCtx.createBufferSource();
            noise.buffer = noiseBuffer;

            const gain1 = audioCtx.createGain();
            const gain2 = audioCtx.createGain();
            const gainNoise = audioCtx.createGain();

            osc1.connect(gain1);
            osc2.connect(gain2);
            noise.connect(gainNoise);

            gain1.connect(masterGain);
            gain2.connect(masterGain);
            gainNoise.connect(masterGain);

            // Envelope Logic - Metallic Ring
            gain1.gain.setValueAtTime(0, t);
            gain1.gain.linearRampToValueAtTime(1.0, t + 0.005);
            gain1.gain.exponentialRampToValueAtTime(0.001, t + 1.5);

            gain2.gain.setValueAtTime(0, t);
            gain2.gain.linearRampToValueAtTime(0.3, t + 0.005);
            gain2.gain.exponentialRampToValueAtTime(0.001, t + 0.4);

            gainNoise.gain.setValueAtTime(0.5, t);
            gainNoise.gain.exponentialRampToValueAtTime(0.001, t + 0.02);

            osc1.start(t);
            osc2.start(t);
            noise.start(t);

            osc1.stop(t + 1.5);
            osc2.stop(t + 1.5);
            noise.stop(t + 0.05);
        }

        // --- 2. UI & Interaction (Advanced Touch Logic) ---
        const keysContainer = document.getElementById('keys-container');
        const toggleNotesBtn = document.getElementById('toggle-notes');
        let showNotes = false;

        // Mouse Drag State
        let isMouseDown = false;

        // Touch Tracking State (Map: identifier -> lastKeyId)
        // Helps to know if we are still dragging on the same key or moved to a new one
        const activeTouches = new Map();

        // Helper to trigger play sound and visual effect
        function triggerKey(keyElement) {
            if (!keyElement) return;
            const freq = parseFloat(keyElement.dataset.freq);
            playSound(freq);
            
            // Visual Animation (Reset class to allow re-trigger)
            keyElement.classList.remove('active');
            void keyElement.offsetWidth; // Trigger reflow
            keyElement.classList.add('active');
            
            // Remove active class after animation
            setTimeout(() => {
                keyElement.classList.remove('active');
            }, 150); 
        }

        function createKeys() {
            baseFrequencies.forEach((freq, index) => {
                const key = document.createElement('div');
                key.className = 'key group select-none';
                key.dataset.freq = freq;
                key.id = `key-${index}`; // ID ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö elementFromPoint
                
                const label = document.createElement('span');
                label.innerText = noteLabels[index];
                label.className = `font-bold text-black opacity-0 text-xs sm:text-base md:text-xl transition-opacity pointer-events-none ${showNotes ? 'opacity-70' : ''}`;
                key.appendChild(label);

                // --- Mouse Events (Desktop) ---
                key.addEventListener('mousedown', (e) => {
                    isMouseDown = true;
                    triggerKey(key);
                });
                
                key.addEventListener('mouseenter', (e) => {
                    if (isMouseDown) {
                        triggerKey(key);
                    }
                });

                keysContainer.appendChild(key);
            });
        }

        // --- Global Mouse Events ---
        window.addEventListener('mouseup', () => {
            isMouseDown = false;
        });

        // --- Advanced Touch Events (Mobile Swipe/Glissando) ---
        // ‡πÉ‡∏ä‡πâ logic ‡∏ô‡∏µ‡πâ‡πÅ‡∏ó‡∏ô Event Listener ‡πÅ‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏õ‡∏∏‡πà‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏•‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏ö‡∏£‡∏∑‡πà‡∏ô
        
        // 1. Touch Start: ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏ï‡∏∞ ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏° track ‡∏ô‡∏¥‡πâ‡∏ß
        keysContainer.addEventListener('touchstart', (e) => {
            e.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏π‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≠
            
            for (let i = 0; i < e.changedTouches.length; i++) {
                const touch = e.changedTouches[i];
                // ‡∏´‡∏≤ element ‡∏ó‡∏µ‡πà‡∏ô‡∏¥‡πâ‡∏ß‡πÅ‡∏ï‡∏∞‡∏≠‡∏¢‡∏π‡πà
                const target = document.elementFromPoint(touch.clientX, touch.clientY);
                const key = target ? target.closest('.key') : null;

                if (key) {
                    triggerKey(key);
                    activeTouches.set(touch.identifier, key.id);
                }
            }
        }, {passive: false});

        // 2. Touch Move: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ô‡∏¥‡πâ‡∏ß‡∏•‡∏≤‡∏Å‡πÑ‡∏õ‡πÇ‡∏î‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (Glissando)
        keysContainer.addEventListener('touchmove', (e) => {
            e.preventDefault();

            for (let i = 0; i < e.changedTouches.length; i++) {
                const touch = e.changedTouches[i];
                const target = document.elementFromPoint(touch.clientX, touch.clientY);
                const key = target ? target.closest('.key') : null;

                if (key) {
                    const lastKeyId = activeTouches.get(touch.identifier);
                    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà (‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏¥‡πâ‡∏ß‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏õ) ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
                    if (key.id !== lastKeyId) {
                        triggerKey(key);
                        activeTouches.set(touch.identifier, key.id);
                    }
                }
            }
        }, {passive: false});

        // 3. Touch End/Cancel: ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£ track ‡∏ô‡∏¥‡πâ‡∏ß‡∏ô‡∏±‡πâ‡∏ô
        const endTouch = (e) => {
            for (let i = 0; i < e.changedTouches.length; i++) {
                activeTouches.delete(e.changedTouches[i].identifier);
            }
        };
        keysContainer.addEventListener('touchend', endTouch);
        keysContainer.addEventListener('touchcancel', endTouch);


        // --- UI Logic ---
        toggleNotesBtn.addEventListener('click', () => {
            showNotes = !showNotes;
            const labels = document.querySelectorAll('.key span');
            labels.forEach(l => {
                l.classList.toggle('opacity-0', !showNotes);
                l.classList.toggle('opacity-70', showNotes);
            });
            toggleNotesBtn.innerText = showNotes ? "‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏ô‡πâ‡∏ï" : "‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏ô‡πâ‡∏ï";
        });

        createKeys();

        const overlay = document.getElementById('start-overlay');
        overlay.addEventListener('click', () => {
            initAudio();
            overlay.style.opacity = '0';
            setTimeout(() => overlay.remove(), 500);
        });

        // --- 3. Recording System ---
        let mediaRecorder;
        let chunks = [];
        let blobUrl;
        let isRecording = false;
        let timerInterval;
        let startTime;

        const recordBtn = document.getElementById('record-btn');
        const stopBtn = document.getElementById('stop-btn');
        const playBtn = document.getElementById('play-btn');
        const downloadLink = document.getElementById('download-link');
        const timerDisplay = document.getElementById('timer');

        recordBtn.addEventListener('click', () => {
            if (!audioCtx) initAudio();
            
            chunks = [];
            const stream = dest.stream; 
            
            let options = { mimeType: 'audio/webm' };
            if (!MediaRecorder.isTypeSupported('audio/webm')) {
                options = { mimeType: 'audio/ogg' };
                if (!MediaRecorder.isTypeSupported('audio/ogg')) options = {};
            }

            mediaRecorder = new MediaRecorder(stream, options);

            mediaRecorder.ondataavailable = (e) => {
                chunks.push(e.data);
            };

            mediaRecorder.onstop = () => {
                const blob = new Blob(chunks, { 'type' : 'audio/webm; codecs=opus' });
                blobUrl = URL.createObjectURL(blob);
                
                downloadLink.href = blobUrl;
                downloadLink.download = `ranat-ek-lek-${new Date().getTime()}.webm`;
                
                playBtn.classList.remove('hidden');
                downloadLink.classList.remove('hidden');
            };

            mediaRecorder.start();
            isRecording = true;

            recordBtn.classList.add('hidden');
            stopBtn.classList.remove('hidden');
            playBtn.classList.add('hidden');
            downloadLink.classList.add('hidden');
            timerDisplay.classList.remove('hidden');

            startTime = Date.now();
            timerInterval = setInterval(() => {
                const diff = Date.now() - startTime;
                const sec = Math.floor(diff / 1000) % 60;
                const min = Math.floor(diff / 60000);
                timerDisplay.innerText = `${min.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
            }, 1000);
        });

        stopBtn.addEventListener('click', () => {
            if (isRecording && mediaRecorder) {
                mediaRecorder.stop();
                isRecording = false;
                
                clearInterval(timerInterval);
                
                stopBtn.classList.add('hidden');
                recordBtn.classList.remove('hidden');
                recordBtn.innerHTML = `<div class="w-3 h-3 bg-red-500 rounded-full mr-1"></div> ‡∏≠‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà`;
            }
        });

        playBtn.addEventListener('click', () => {
            if (blobUrl) {
                const audio = new Audio(blobUrl);
                audio.play();
            }
        });
    </script>
</body>
</html>
