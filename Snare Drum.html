<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Realistic Snare Drum Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ã‡∏π‡∏°‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        body {
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            overflow: hidden;
            background-color: #1a1a1a;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏≠‡∏á */
        .drum-container {
            position: relative;
            width: 90vw;
            max-width: 400px;
            aspect-ratio: 1/1;
            margin: 0 auto;
            border-radius: 50%;
            transition: transform 0.05s ease;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }

        /* ‡∏Ç‡∏≠‡∏ö‡∏Å‡∏•‡∏≠‡∏á (Rim) */
        .rim {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(145deg, #cfcfcf, #8a8a8a, #cfcfcf);
            box-shadow: 
                0 10px 20px rgba(0,0,0,0.5),
                inset 0 2px 5px rgba(255,255,255,0.8),
                inset 0 -2px 5px rgba(0,0,0,0.5);
            z-index: 10;
        }

        /* ‡∏ô‡πá‡∏≠‡∏ï‡∏¢‡∏∂‡∏î‡∏Å‡∏•‡∏≠‡∏á (Lugs visual) */
        .lug {
            position: absolute;
            width: 20px;
            height: 30px;
            background: linear-gradient(to bottom, #dcdcdc, #808080);
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
            z-index: 11;
        }

        /* ‡∏´‡∏ô‡∏±‡∏á‡∏Å‡∏•‡∏≠‡∏á (Drum Head) */
        .drum-head {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fdfdfd, #e0e0e0, #dcdcdc);
            /* Texture ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏Å‡∏•‡∏≠‡∏á */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.1'/%3E%3C/svg%3E");
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
        }

        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡∏ï‡∏µ */
        .drum-head.hit {
            background: radial-gradient(circle at 30% 30%, #fffff0, #efefef, #dcdcdc);
            transform: scale(0.99);
        }

        /* ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Å‡∏•‡∏≤‡∏á‡∏Å‡∏•‡∏≠‡∏á */
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: rgba(0,0,0,0.3);
            text-transform: uppercase;
            letter-spacing: 2px;
            pointer-events: none;
        }

        /* ‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô Damper (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á) */
        .damper-ring {
            position: absolute;
            top: 50px;
            left: 50px;
            right: 50px;
            bottom: 50px;
            border-radius: 50%;
            border: 2px solid rgba(0,0,0,0.05);
            pointer-events: none;
        }

        /* ‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏ô‡∏™‡∏∞‡πÄ‡∏ó‡∏∑‡∏≠‡∏ô */
        @keyframes vibrate {
            0% { transform: translate(0, 0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0, 0); }
        }

        .vibrating {
            animation: vibrate 0.1s linear;
        }

        /* Overlay ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô */
        #start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .visual-ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.1);
            transform: scale(0);
            pointer-events: none;
            animation: ripple-anim 0.3s linear;
        }

        @keyframes ripple-anim {
            to {
                transform: scale(2);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center h-screen bg-neutral-900 text-white">

    <!-- Overlay ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏° Audio Context -->
    <div id="start-overlay">
        <h1 class="text-3xl font-bold mb-4">Snare Drum Pro</h1>
        <div class="text-6xl mb-6">ü•Å</div>
        <p class="mb-8 text-gray-300">‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô<br>(‡πÉ‡∏™‡πà‡∏´‡∏π‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)</p>
        <button id="start-btn" class="px-8 py-3 bg-blue-600 rounded-full font-bold text-lg hover:bg-blue-500 transition shadow-lg">
            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏µ‡∏Å‡∏•‡∏≠‡∏á
        </button>
    </div>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß -->
    <div class="absolute top-4 w-full text-center pointer-events-none">
        <h2 class="text-xl font-bold tracking-widest text-neutral-500">SNARE SIMULATOR</h2>
        <p class="text-xs text-neutral-600">Multi-touch Support</p>
    </div>

    <!-- ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≠‡∏á -->
    <div id="snare-drum" class="drum-container">
        <!-- ‡∏Ç‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ô‡πá‡∏≠‡∏ï -->
        <div class="rim">
            <!-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡πá‡∏≠‡∏ï 8 ‡∏ï‡∏±‡∏ß‡∏£‡∏≠‡∏ö‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ JS ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥ manual -->
            <div class="lug" style="top: -5px; left: 50%; transform: translateX(-50%);"></div>
            <div class="lug" style="bottom: -5px; left: 50%; transform: translateX(-50%);"></div>
            <div class="lug" style="left: -5px; top: 50%; transform: translateY(-50%) rotate(90deg);"></div>
            <div class="lug" style="right: -5px; top: 50%; transform: translateY(-50%) rotate(90deg);"></div>
            <!-- Diagonal lugs -->
            <div class="lug" style="top: 14%; left: 14%; transform: rotate(-45deg);"></div>
            <div class="lug" style="top: 14%; right: 14%; transform: rotate(45deg);"></div>
            <div class="lug" style="bottom: 14%; left: 14%; transform: rotate(45deg);"></div>
            <div class="lug" style="bottom: 14%; right: 14%; transform: rotate(-45deg);"></div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏•‡∏≠‡∏á -->
        <div id="drum-head" class="drum-head">
            <div class="logo">GEMINI</div>
            <div class="damper-ring"></div>
        </div>
    </div>

    <div class="mt-8 text-neutral-500 text-sm">
        ‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏µ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏ô‡∏¥‡πâ‡∏ß)
    </div>

    <script>
        // --- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Audio Engine (Web Audio API) ---
        let audioCtx;
        let noiseBuffer;
        let isAudioEnabled = false;

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á Noise Buffer (‡∏ó‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£)
        function createNoiseBuffer() {
            if (!audioCtx) return;
            const bufferSize = audioCtx.sampleRate * 2.0; // 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            noiseBuffer = buffer;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á Snare (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå mp3 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)
        function triggerSnare(velocity = 1) {
            if (!audioCtx || !isAudioEnabled) return;

            const t = audioCtx.currentTime;

            // 1. ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÇ‡∏ó‡∏ô (Body ‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏≠‡∏á) - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ô‡πà‡∏ô
            const osc = audioCtx.createOscillator();
            const oscGain = audioCtx.createGain();
            
            osc.type = 'triangle';
            
            // Pitch Envelope: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏π‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏Å‡∏•‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡πá‡∏ß
            osc.frequency.setValueAtTime(350, t);
            osc.frequency.exponentialRampToValueAtTime(180, t + 0.1);
            
            // Amplitude Envelope
            oscGain.gain.setValueAtTime(0, t);
            oscGain.gain.linearRampToValueAtTime(0.5 * velocity, t + 0.005);
            oscGain.gain.exponentialRampToValueAtTime(0.01, t + 0.2);

            osc.connect(oscGain);
            oscGain.connect(audioCtx.destination);
            
            osc.start(t);
            osc.stop(t + 0.2);

            // 2. ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏™‡πâ (Noise/Snare wires) - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏°
            const noise = audioCtx.createBufferSource();
            noise.buffer = noiseBuffer;
            
            // Filter: ‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏ï‡πà‡∏≥‡∏≠‡∏≠‡∏Å ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ã‡πà‡∏≤‡πÜ ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô
            const noiseFilter = audioCtx.createBiquadFilter();
            noiseFilter.type = 'highpass';
            noiseFilter.frequency.value = 1000;
            
            const noiseGain = audioCtx.createGain();
            // Envelope ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏™‡πâ
            noiseGain.gain.setValueAtTime(0, t);
            noiseGain.gain.linearRampToValueAtTime(0.8 * velocity, t + 0.005);
            noiseGain.gain.exponentialRampToValueAtTime(0.01, t + 0.35); // ‡∏´‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏¢‡∏≤‡∏ß‡∏Å‡∏ß‡πà‡∏≤ Tone ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢

            noise.connect(noiseFilter);
            noiseFilter.connect(noiseGain);
            noiseGain.connect(audioCtx.destination);
            
            noise.start(t);
            noise.stop(t + 0.4);
        }

        // --- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ UI ‡πÅ‡∏•‡∏∞ Event Listeners ---
        const drumContainer = document.getElementById('snare-drum');
        const drumHead = document.getElementById('drum-head');
        const startOverlay = document.getElementById('start-overlay');
        const startBtn = document.getElementById('start-btn');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ú‡πà‡∏≤‡∏ô User Interaction)
        function initAudio() {
            if (isAudioEnabled) return;
            
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            audioCtx = new AudioContext();
            
            createNoiseBuffer();
            
            // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠ unlock audio ‡∏ö‡∏ô iOS
            const buffer = audioCtx.createBuffer(1, 1, 22050);
            const source = audioCtx.createBufferSource();
            source.buffer = buffer;
            source.connect(audioCtx.destination);
            source.start(0);

            isAudioEnabled = true;
            startOverlay.style.opacity = '0';
            setTimeout(() => {
                startOverlay.style.display = 'none';
            }, 500);
        }

        startBtn.addEventListener('click', initAudio);
        startOverlay.addEventListener('click', initAudio);

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Visual Feedback
        function animateHit(x, y) {
            // Animation CSS
            drumHead.classList.remove('hit');
            void drumHead.offsetWidth; // Trigger reflow
            drumHead.classList.add('hit');

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á Ripple effect ‡∏ï‡∏£‡∏á‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏µ
            const rect = drumHead.getBoundingClientRect();
            const ripple = document.createElement('div');
            ripple.className = 'visual-ripple';
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ó‡∏ò‡πå
            const relX = x - rect.left;
            const relY = y - rect.top;
            
            ripple.style.left = relX + 'px';
            ripple.style.top = relY + 'px';
            ripple.style.width = '50px';
            ripple.style.height = '50px';
            ripple.style.marginLeft = '-25px'; // Center
            ripple.style.marginTop = '-25px'; // Center

            drumHead.appendChild(ripple);
            
            // ‡∏•‡∏ö Ripple ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à
            setTimeout(() => {
                ripple.remove();
            }, 300);
        }

        // --- Touch Event Handling (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Multi-touch) ---
        
        drumContainer.addEventListener('touchstart', (e) => {
            e.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏π‡∏°/‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô
            
            if (!isAudioEnabled) {
                initAudio();
                return;
            }

            // Loop ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏ô‡∏¥‡πâ‡∏ß‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏∞‡∏•‡∏á‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà
            for (let i = 0; i < e.changedTouches.length; i++) {
                const touch = e.changedTouches[i];
                
                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏£‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏î (‡∏ñ‡πâ‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö force/3d touch) ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
                let velocity = 1.0;
                if (touch.force > 0) {
                    velocity = 0.5 + (touch.force * 0.5); // Normalize
                } else {
                    // Variation ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏Ç‡πá‡∏á‡∏ó‡∏∑‡πà‡∏≠
                    velocity = 0.9 + (Math.random() * 0.2); 
                }

                triggerSnare(velocity);
                animateHit(touch.clientX, touch.clientY);
            }
        }, { passive: false });

        // --- Mouse Event Handling (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Desktop) ---
        drumContainer.addEventListener('mousedown', (e) => {
            if (!isAudioEnabled) return;
            triggerSnare(1.0);
            animateHit(e.clientX, e.clientY);
        });

        // Keyboard Support (‡πÅ‡∏ñ‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î)
        document.addEventListener('keydown', (e) => {
            if (!isAudioEnabled) return;
            if (e.code === 'Space' || e.key === 'f' || e.key === 'j') {
                triggerSnare(1.0);
                // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÜ ‡∏Å‡∏•‡∏≠‡∏á
                const rect = drumHead.getBoundingClientRect();
                const x = rect.left + rect.width/2 + (Math.random() * 40 - 20);
                const y = rect.top + rect.height/2 + (Math.random() * 40 - 20);
                animateHit(x, y);
            }
        });

    </script>
</body>
</html>